"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6287],{6287:($,b,i)=>{i.r(b),i.d(b,{WordlePageModule:()=>V});var m=i(6814),w=i(95),c=i(451),y=i(2692),f=i(5861),a=i(9212),P=i(7398),C=i(8180),p=i(3960);let M=(()=>{class e{constructor(t){this.firestore=t}calcularRespuesta(t){var o=this;return(0,f.Z)(function*(){t=t.toUpperCase();var h,s=[];s=(yield o.palabraDia()).toUpperCase().split(""),h=t.split("");for(var u="",l=0;l<s.length;l++)s[l]==h[l]?u+="V":s.includes(h[l])?u+="A":u+="G";return u})()}palabrasDiaFire(){const t=(0,p.hJ)(this.firestore,"palabrasWordle");return(0,p.BS)(t,{idField:"id"}).pipe((0,P.U)(o=>o))}palabraDia(){var t=this;return(0,f.Z)(function*(){var r=(new Date).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}),s="";return""==(s=yield new Promise(u=>{t.palabrasDiaFire().subscribe(l=>{for(let d=0;d<l.length;d++)l[d]&&r===l[d].fecha&&(s=l[d].palabra);u(s)})}))&&(s="Hoy no hay palabra"),s})()}addJugada(t,o){var n=this;const r=new Date,h=r.toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}),u=(0,p.JU)((0,p.hJ)(this.firestore,`Wordle/${t}/${r.getFullYear()}/${r.getMonth()+1}/${r.getDate()}`));var l;this.misJugadas(t).pipe((0,C.q)(1)).subscribe({next:(l=(0,f.Z)(function*(d){let v;v=0===d.length?1:Math.max(...d.map(z=>z.orden))+1;const _={orden:v,fecha:h,palabra:o,respuesta:yield n.calcularRespuesta(o)};(0,p.pl)(u,_)}),function(v){return l.apply(this,arguments)})})}misJugadas(t){var o=new Date;const n=(0,p.hJ)(this.firestore,`Wordle/${t}/${o.getFullYear()}/${o.getMonth()+1}/${o.getDate()}`);return(0,p.BS)(n,{idField:"id"}).pipe((0,P.U)(r=>r))}static#a=this.\u0275fac=function(o){return new(o||e)(a.LFG(p.gg))};static#t=this.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var D=i(2333),x=i(5232),Z=i(6065);function F(e,g){if(1&e&&(a.TgZ(0,"ion-col",1),a._uU(1),a.qZA()),2&e){const t=g.$implicit,o=g.index,n=a.oxw();a.Q6J("ngClass",n.colores[o]),a.xp6(),a.hij(" ",t," ")}}let I=(()=>{class e{constructor(){this.palabra="",this.aciertos="",this.letras=["","","","",""],this.colores=["","","","",""]}ngOnInit(){console.log("Palabra:",this.palabra),this.palabra=this.palabra.toUpperCase(),0!=this.palabra.length&&(this.letras=this.palabra.split("")),0!=this.aciertos.length&&(this.colores=this.aciertos.split(""))}static#a=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275cmp=a.Xpm({type:e,selectors:[["wordle-row"]],inputs:{palabra:"palabra",aciertos:"aciertos"},decls:2,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,n){1&o&&(a.TgZ(0,"ion-row"),a.YNc(1,F,2,2,"ion-col",0),a.qZA()),2&o&&(a.xp6(),a.Q6J("ngForOf",n.letras))},dependencies:[m.mk,m.sg,c.wI,c.Nd],styles:["ion-col[_ngcontent-%COMP%]{border-style:solid;border-width:.2em;border-color:var(--ion-color-medium);margin:.1em;width:2em;height:2em;display:flex;flex-direction:column;justify-content:center;align-items:center;color:var(--ion-color-medium);font-weight:700;font-size:2em}.V[_ngcontent-%COMP%]{border-color:var(--ion-color-success);background-color:var(--ion-color-success);color:var(--ion-color-light)}.A[_ngcontent-%COMP%]{border-color:var(--ion-color-warning);background-color:var(--ion-color-warning);color:var(--ion-color-light)}.G[_ngcontent-%COMP%]{border-color:var(--ion-color-medium);background-color:var(--ion-color-medium);color:var(--ion-color-light)}ion-row[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:auto auto .5em}"]})}return e})();var T=i(7898);function j(e,g){if(1&e&&a._UZ(0,"wordle-row",9),2&e){const t=g.$implicit;a.Q6J("palabra",t.palabra)("aciertos",t.respuesta)}}function J(e,g){if(1&e&&(a.TgZ(0,"div",10)(1,"ion-label"),a._uU(2,"Vuelve ma\xf1ana... La palabra de hoy era: "),a.TgZ(3,"ion-text",11),a._uU(4),a.qZA()()()),2&e){const t=a.oxw();a.xp6(4),a.Oqu(t.palabraDia)}}function W(e,g){1&e&&(a.TgZ(0,"div",12)(1,"ion-label"),a._uU(2,"\xa1Enhorabuena, has acertado la palabra de hoy!"),a.qZA()())}function O(e,g){if(1&e){const t=a.EpF();a.TgZ(0,"ion-input",13),a.NdJ("keyup.enter",function(n){a.CHM(t);const r=a.oxw();return a.KtG(r.agregarPalabra(n))}),a.qZA()}}function S(e,g){if(1&e&&(a.TgZ(0,"div"),a._UZ(1,"app-abrir-modal-fin",14),a.qZA()),2&e){const t=a.oxw();a.xp6(),a.s9C("resultado",t.resultado)}}const A=[{path:"",component:(()=>{class e{constructor(t,o,n){this.wordleServ=t,this.toastController=o,this.authServ=n,this.palabrasIntentos=[],this.mostrarInput=!0,this.mostrarMensajeGana=!1,this.mostrarMensajePierde=!1,this.palabraDia="",this.uid="",this.fechaActual="",this.abrirModal=!1,this.resultado="ganado"}ionViewWillEnter(){this.loadData()}loadData(){var t=this;return(0,f.Z)(function*(){t.palabraDia=yield t.wordleServ.palabraDia(),t.fechaActual=(new Date).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}),t.uid=t.authServ.getUid()??"",t.wordleServ.misJugadas(t.uid).subscribe({next:r=>{const s={orden:6,fecha:t.fechaActual,palabra:"",respuesta:""},h=r.concat(Array.from({length:6-r.length},()=>s));t.palabrasIntentos=h.sort((l,d)=>l.orden-d.orden),t.palabrasIntentos.some(l=>"VVVVV"===l.respuesta)?(t.mostrarInput=!1,t.mostrarMensajeGana=!0,t.resultado="ganado",t.abrirModal=!0):""!=t.palabrasIntentos[5].palabra&&"VVVVV"!=t.palabrasIntentos[5].respuesta&&(t.mostrarInput=!1,t.mostrarMensajePierde=!0,t.resultado="perdido",t.abrirModal=!0)}})})()}agregarPalabra(t){const o=t.target.value;o.length>=5?(t.target.value="",this.wordleServ.addJugada(this.uid,o)):this.presentToast("close","La palabra debe tener 5 letras","danger")}presentToast(t,o,n){var r=this;return(0,f.Z)(function*(){yield(yield r.toastController.create({icon:t,message:o,color:n,duration:2500,position:"top"})).present()})()}static#a=this.\u0275fac=function(o){return new(o||e)(a.Y36(M),a.Y36(c.yF),a.Y36(D.e))};static#t=this.\u0275cmp=a.Xpm({type:e,selectors:[["app-wordle"]],decls:14,vars:6,consts:[[3,"fullscreen"],["id","main-content",1,"ion-page"],["collapse","condense"],["size","large"],[3,"palabra","aciertos",4,"ngFor","ngForOf"],["class","mensajePierde",4,"ngIf"],["class","mensajeGana",4,"ngIf"],["type","text","fill","outline","maxlength","5","minlength","5","placeholder","Introduce tu palabra",3,"keyup.enter",4,"ngIf"],[4,"ngIf"],[3,"palabra","aciertos"],[1,"mensajePierde"],[1,"palabraDelDia"],[1,"mensajeGana"],["type","text","fill","outline","maxlength","5","minlength","5","placeholder","Introduce tu palabra",3,"keyup.enter"],["idJuego","Wordle",3,"resultado"]],template:function(o,n){1&o&&(a.TgZ(0,"ion-content",0),a._UZ(1,"app-mimenu"),a.TgZ(2,"ion-content",1),a._UZ(3,"app-miheader"),a.TgZ(4,"ion-header",2)(5,"ion-toolbar")(6,"ion-title",3),a._uU(7,"wordle"),a.qZA()()(),a.TgZ(8,"ion-grid"),a.YNc(9,j,1,2,"wordle-row",4),a.qZA(),a.YNc(10,J,5,1,"div",5)(11,W,3,0,"div",6)(12,O,1,0,"ion-input",7)(13,S,2,1,"div",8),a.qZA()()),2&o&&(a.Q6J("fullscreen",!0),a.xp6(9),a.Q6J("ngForOf",n.palabrasIntentos),a.xp6(),a.Q6J("ngIf",n.mostrarMensajePierde),a.xp6(),a.Q6J("ngIf",n.mostrarMensajeGana),a.xp6(),a.Q6J("ngIf",n.mostrarInput),a.xp6(),a.Q6J("ngIf",n.abrirModal))},dependencies:[m.sg,m.O5,c.W2,c.jY,c.Gu,c.pK,c.Q$,c.yW,c.wd,c.sr,c.j9,x.S,Z.p,I,T.g],styles:["ion-label[_ngcontent-%COMP%], .mensajeGana[_ngcontent-%COMP%], .mensajePierde[_ngcontent-%COMP%]{margin:auto;width:-moz-fit-content;width:fit-content}ion-input[_ngcontent-%COMP%], .mensajeGana[_ngcontent-%COMP%], .mensajePierde[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;margin:.5em auto;max-width:90%}.mensajeGana[_ngcontent-%COMP%]{background-color:var(--ion-color-success);color:var(--ion-color-light);padding:1em;border-radius:.5em;font-size:small}.mensajePierde[_ngcontent-%COMP%]{background-color:var(--ion-color-danger);color:var(--ion-color-light);padding:1em;border-radius:.5em;font-size:small}.palabraDelDia[_ngcontent-%COMP%]{font-weight:700}"]})}return e})()}];let G=(()=>{class e{static#a=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=a.oAB({type:e});static#e=this.\u0275inj=a.cJS({imports:[y.Bz.forChild(A),y.Bz]})}return e})();var U=i(822);let V=(()=>{class e{static#a=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=a.oAB({type:e});static#e=this.\u0275inj=a.cJS({imports:[m.ez,w.u5,c.Pc,G,U.K]})}return e})()}}]);