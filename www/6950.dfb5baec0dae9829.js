"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6950],{6950:(v,_,a)=>{a.r(_),a.d(_,{EditProfilePageModule:()=>C});var d=a(6814),h=a(95),c=a(451),m=a(2692),f=a(5861),t=a(9212),p=a(9535),r=a(2333);function n(i,E){if(1&i){const o=t.EpF();t.TgZ(0,"div")(1,"ion-title",2),t._uU(2,"Editar perfil"),t.qZA(),t.TgZ(3,"ion-card",3)(4,"ion-item")(5,"ion-text"),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"ion-button",4),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.guardarNombre())}),t._UZ(8,"ion-icon",5),t.qZA()(),t.TgZ(9,"ion-item",6)(10,"ion-text"),t._uU(11,"Cambiar la contrase\xf1a"),t.qZA(),t.TgZ(12,"ion-button",7),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.cambiarPassword())}),t._UZ(13,"ion-icon",5),t.qZA()(),t.TgZ(14,"ion-item",6)(15,"ion-button",8),t.NdJ("click",function(){t.CHM(o);const s=t.oxw();return t.KtG(s.borrarCuenta())}),t._uU(16,"Borrar cuenta"),t.qZA()()()()}}const u=[{path:"",component:(()=>{class i{constructor(o,e,s,g){this.auth=o,this.authService=e,this.alertController=s,this.router=g,this.datosEditar={nombre:"Ale",fechaNacimiento:"18/08/90"}}guardarNombre(){this.alertFormulario("Editar nombre")}cambiarPassword(){var o=this.auth.currentUser?.email;this.authService.resetPassword(o),this.alert("En unos instantes recibir\xe1 un mensaje de correo electr\xf3nico con las instrucciones para cambiar la contrase\xf1a","Cambio de contrase\xf1a en proceso")}borrarCuenta(){this.alertBorrado("Est\xe1 apunto de borrar la cuenta de forma permanente \xbfQuiere seguir?","Borrado permanente")}alert(o,e){var s=this;return(0,f.Z)(function*(){yield(yield s.alertController.create({header:e,message:o,buttons:["OK"]})).present()})()}alertBorrado(o,e){var s=this;return(0,f.Z)(function*(){yield(yield s.alertController.create({header:e,message:o,buttons:[{text:"OK",handler:()=>{s.authService.eliminarCuenta(),s.router.navigate(["login"])}},{text:"Cancelar",role:"cancel",handler:()=>{console.log("Cancelar clicado")}}]})).present()})()}alertFormulario(o){var e=this;return(0,f.Z)(function*(){yield(yield e.alertController.create({header:o,inputs:[{name:"nombre",type:"text",placeholder:"Ingresa tu nombre"}],buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"OK",handler:g=>{e.nombreIngresado=g.nombre}}]})).present()})()}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(p.gx),t.Y36(r.e),t.Y36(c.Br),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-profile"]],decls:2,vars:2,consts:[[3,"fullscreen"],[4,"ngIf"],["id","title_css"],["id","card_css"],["id","boton_editar_nombre_css",3,"click"],["name","pencil-outline"],["id","item_css"],["id","boton_editar_css",3,"click"],["color","warning",3,"click"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-content",0),t.YNc(1,n,17,0,"div",1),t.qZA()),2&e&&(t.Q6J("fullscreen",!0),t.xp6(),t.Q6J("ngIf",null!=s.datosEditar))},dependencies:[d.O5,c.YG,c.PM,c.W2,c.gu,c.Ie,c.yW,c.wd],styles:["#card_css[_ngcontent-%COMP%]{padding:10em;border:solid}ion-item[_ngcontent-%COMP%]{margin:3em}#boton_css[_ngcontent-%COMP%]{padding:4em}#title_css[_ngcontent-%COMP%]{padding:2em}#boton_editar_css[_ngcontent-%COMP%]{margin-left:3em}#boton_editar_nombre_css[_ngcontent-%COMP%]{margin-left:12.9em}"]})}return i})()}];let P=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275mod=t.oAB({type:i});static#r=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(u),m.Bz]})}return i})();var y=a(822);let C=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275mod=t.oAB({type:i});static#r=this.\u0275inj=t.cJS({imports:[d.ez,h.u5,c.Pc,P,y.K]})}return i})()},2333:(v,_,a)=>{a.d(_,{e:()=>f});var d=a(5861),h=a(9535),c=a(3960),m=a(9212);let f=(()=>{class t{constructor(r,n){this.auth=r,this.firestore=n}getUserProfile(){const n=(0,c.JU)(this.firestore,`users/${this.auth.currentUser.uid}`);return(0,c._1)(n)}saveProfile(r){var n=this;return(0,d.Z)(function*(){try{const l=n.auth.currentUser,u=(0,c.JU)(n.firestore,`users/${l.uid}`);return yield(0,c.pl)(u,{id:l.uid,email:l.email,name:r}),!0}catch{return null}})()}getUid(){try{return this.auth.currentUser?.uid}catch{return null}}register(r,n,l){var u=this;return(0,d.Z)(function*(){try{const P=yield(0,h.Xb)(u.auth,r,n);return u.saveProfile(l),P}catch{return null}})()}login(r,n){var l=this;return(0,d.Z)(function*(){try{return yield(0,h.e5)(l.auth,r,n)}catch{return null}})()}resetPassword(r){var n=this;return(0,d.Z)(function*(){try{yield(0,h.LS)(n.auth,r)}catch{}})()}logout(){try{return(0,h.w7)(this.auth)}catch{return Promise}}eliminarCuenta(){const r=this.auth.currentUser;r?r.delete().then(()=>{console.log("Cuenta eliminada exitosamente.")}).catch(n=>{console.error("Error al eliminar la cuenta:",n.message)}):console.error("No hay un usuario autenticado.")}static#t=this.\u0275fac=function(n){return new(n||t)(m.LFG(h.gx),m.LFG(c.gg))};static#e=this.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);